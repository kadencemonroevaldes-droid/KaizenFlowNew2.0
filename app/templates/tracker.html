<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kaizen Flow | Tracker</title>
<link rel="stylesheet" href="/static/css/style.css">
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body>
<nav class="nav">
  <div class="logo">üåç Kaizen Flow</div>
  <div class="links">
    <a href="/">Dashboard</a>
    <a href="/tracker" class="active">Tracker</a>
    <a href="/culture">Culture Lens</a>
  </div>
</nav>

<section class="form-section">
  <h2>Add New Idea</h2>
  <form method="post" action="/add">
    <input name="title" placeholder="Idea Title" required>
    <input name="goal" placeholder="Linked Goal" required>
    <select name="sdg">
      <option>3 Good Health</option>
      <option>4 Quality Education</option>
      <option>5 Gender Equality</option>
      <option>13 Climate Action</option>
      <option>17 Partnerships</option>
    </select>
    <button>Save üí°</button>
  </form>
</section>

<section class="ideas">
  <h2>Logged Ideas</h2>
  {% if ideas %}
  <table>
    <tr><th>Title</th><th>Goal</th><th>SDG</th><th>Progress</th></tr>
    {% for i in ideas %}
    <tr><td>{{i.title}}</td><td>{{i.goal}}</td><td>{{i.sdg}}</td><td>{{i.progress}}%</td></tr>
    {% endfor %}
  </table>
  {% else %}
  <p>No ideas logged yet.</p>
  {% endif %}
</section>

<div id="chart"></div>
<script>
const data={{ideas|map(attribute='progress')|list|tojson}};
if(data.length>0){
  const options={chart:{type:"line",height:250},series:[{name:"Progress",data:data}],
  colors:["#0072ff"],stroke:{width:3}};
  new ApexCharts(document.querySelector("#chart"),options).render();
}
</script>
</body>
</html>
